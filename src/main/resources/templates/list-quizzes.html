<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Quiz List</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
    />
  </head>
  <body>
    <div class="container mt-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
          <h2>Quizzes</h2>
          <a href="/add-quiz" class="btn btn-primary">Add New Quiz</a>
      </div>
  
      <!-- Status Filter -->
      <div class="mb-3">
          <form th:action="@{/quizzes}" method="get" class="d-flex align-items-center">
              <label class="me-2">Filter by Status: &nbsp;</label>
              <select name="status" class="form-select me-2" style="width: auto;" onchange="this.form.submit()">
                  <option th:each="status : ${statuses}"
                          th:value="${status}"
                          th:text="${status}"
                          th:selected="${status == selectedStatus}">
                  </option>
              </select>
          </form>
      </div>
  
      <table class="table table-striped">
          <thead>
              <tr>
                  <th>Title</th>
                  <th>Description</th>
                  <th>Status</th>
                  <th>Questions</th>
                  <th>Actions</th>
              </tr>
          </thead>
          <tbody>
              <tr th:each="quiz : ${quizzes}">
                  <td th:text="${quiz.title}"></td>
                  <td th:text="${quiz.description}"></td>
                  <td th:text="${quiz.status}"></td>
                  <td>
                      <a th:href="@{/quizzes/{id}/questions(id=${quiz.id})}" class="btn btn-info btn-sm">
                        <i class="bi bi-eye"></i>  
                        <span class="badge text-white" style="font-size: 14px" title="View All Questions" th:text="${quiz.questionCount}">0</span></a>
                  </td>
                  <td>
                      <a th:href="@{/edit/{id}(id=${quiz.id})}" class="btn btn-secondary btn-sm"><i class="bi bi-pen"></i>  Edit</a>
                      <form th:action="@{/quizzes/delete/{id}(id=${quiz.id})}" method="post" style="display: inline;">
                          <button type="submit" class="btn btn-danger btn-sm" 
                                  onclick="return confirm('Are you sure you want to delete this quiz?')"><i class="bi bi-trash"></i>  Delete</button>
                      </form>
                  </td>
              </tr>
              <tr th:if="${quizzes.empty}">
                  <td colspan="5" class="text-center">No quizzes found</td>
              </tr>
          </tbody>
      </table>
    </div>
  </body>
</html>